# Koyeb Configuration File
# https://www.koyeb.com/docs/reference/koyeb-file-reference

name: 3blex

services:
  - name: web
    git:
      repository: github.com/errakui/3blex
      branch: master
      builder: dockerfile
      dockerfile:
        path: Dockerfile
    
    # Instance configuration
    instance_type: nano  # Use 'small' for production
    regions:
      - fra  # Frankfurt, Europe
    
    # Scaling
    scaling:
      min: 1
      max: 1  # Increase for autoscaling
    
    # Port configuration
    ports:
      - port: 8080
        protocol: http
    
    # Routes
    routes:
      - path: /
        port: 8080
    
    # Health checks
    health_checks:
      - port: 8080
        protocol: http
        path: /
        interval_seconds: 10
        timeout_seconds: 5
        healthy_threshold: 2
        unhealthy_threshold: 3
    
    # Environment variables (set these in Koyeb dashboard or CLI)
    env:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: "8080"
      # Add these via Koyeb dashboard (sensitive data):
      # - DATABASE_URL
      # - JWT_SECRET
      # - STRIPE_SECRET_KEY
      # - STRIPE_PUBLISHABLE_KEY
